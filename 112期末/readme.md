# 遊戲內腳本實作 - 三軸穩定炸彈瞄準儀

聲明 : 此腳本是Spacee Engineers遊戲專用，也只能在遊戲內運行，全部自力研發並無修改他人專案  
API : https://github.com/malware-dev/MDK-SE/wiki/Sandbox.ModAPI.Ingame  
語言 : C#  

## 環境介紹

Space Engineers是一款宇宙尺度的開放世界沙盒遊戲，遊戲內提供各式各樣具功能的部件方塊供玩家自由組裝機體  
部件可以直接透過遊戲介面做簡單的手動和連鎖控制，也可以使用官方開放的API搭配C#來寫程式操控，  
用遊戲內的可程式方塊可以直接執行，並附帶編譯器可以debug  

## 開發動機

當時期中專案的技術完成時，我立即就聯想到了 : 現實中早期轟炸機的炸彈瞄準儀是使用陀螺儀來穩定的，而我完全可以模擬出這個東西來  
我選定的是世界上第一款實際有效的瞄準儀 - 諾頓投彈儀  
它包含了雙陀螺儀穩定(相當於現代的五軸防手震)的瞄準鏡、類比計算機、自動駕駛  
與現實不同的是，虛擬世界中所有參數變化都是可以即時取得的，這大大地降低實際開發的難度  
在Spacee Engineers這種簡化物理的環境可以說是再適合不過  

## 程式說明

硬體部分可大致分為 : 穩定儀本體、手動瞄準鏡頭、自動指向鏡頭  
投彈手需要在飛行中持續將瞄準鏡對準目標，瞄準鏡將會持續對目標測距，將距離、鏡頭角度、自身高度換算出目標的高度差  
有了高度差之後加上自身飛行速度就可以換算出炸彈落點，自動鏡頭將會瞄準目標高度所在平面上的預測位置  
當自動鏡頭與手動鏡頭兩者角度重合時，會啟動喇叭方塊播放提示音，提醒投彈手將炸彈釋放的時機  

程式上的架構為 : 
+ 測距換算
+ 基本的雙軸穩定(Stablize)，對齊地面
+ 考慮到風偏或轉向時飛機的前進方向將不完全是機頭朝向，所以再增加一軸來指向真實的前進方位(Stablize2)
+ 最終落點預測(BombPredict)

![S2](https://github.com/st741963456/Space-Engineer-Scripts/assets/36965820/2e99a200-3bba-47e5-9120-3bb2d051cc85)

## 實際運作成果

### 執行中截圖
![image](https://github.com/st741963456/Space-Engineer-Scripts/assets/36965820/563501dc-6670-4bf1-be5b-a1343f39b788)

### 影片
https://youtu.be/deoILtrc3T8
